# `itertools.permutations`
```py
def permutations(iterable, r=None):
    pool = tuple(iterable)
    n = len(pool)
    r = n if r is None else r
    if r > n:
        return
    indices = list(range(n))
    cycles = list(range(n, n-r, -1))
    yield tuple(pool[i] for i in indices[:r])
    while n:
        for i in reversed(range(r)):
            cycles[i] -= 1
            if cycles[i] == 0:
                indices[i:] = indices[i+1:] + indices[i:i+1]
                cycles[i] = n - i
            else:
                j = cycles[i]
                indices[i], indices[-j] = indices[-j], indices[i]
                yield tuple(pool[i] for i in indices[:r])
                break
        else:
            return
```
`itertools.permutations()` 함수의 핵심은 `indices` 리스트와 `cycles` 리스트이다. `indices`는 `iterable`에 실제로 접근하는 인덱스이며, `cycles`는 `r`개를 순열 방식으로 뽑기 위해 사용된다.

결과를 반환할 때 `indices` 리스트에서 `r`개, 즉 <span style="color: red;">`indices[:r]`을 반환함을 인지한다.</span>

1. `i`는 `r - 1`부터 `0`까지 순회한다. `i`의 의미는 서로 다른 순열의 경우의 수를 만들기 위해 swap에 사용되는 기준 인덱스이다.
2. `j`는 중복을 피하여 `indices[i]`와 swap할 수 있는 경우의 수를 의미한다. 이는 `indices`에 끝에 모두 위치해 있기 때문에 음수 인덱스 `-j`로 접근한다.
3. `indices[i]`에서의 경우의 수를 모두 구했다면 `cycles[i] = 0`이 된다. `indices[i - 1]`에서의 경우의 수를 새롭게 구해야 하기 때문에 `indices` 와 `cycles`를 초기화해준다.

### $_{6}P_{3}$
|`i`|`-j`|`cycles`|`indices`|`yield`|
|:-:|:-:|:-:|:-:|:-:|
|||`[6, 5, 4]`|`[0, 1, 2, 3, 4, 5]`|`[0, 1, 2]`|
|`2`|`-3`|`[6, 5, 3]`|`[0, 1, 3, 2, 4, 5]`|`[0, 1, 3]`|
|`2`|`-2`|`[6, 5, 2]`|`[0, 1, 4, 2, 3, 5]`|`[0, 1, 4]`|
|`2`|`-1`|`[6, 5, 1]`|`[0, 1, 5, 2, 3, 4]`|`[0, 1, 5]`|
|||`[6, 5, 4]`|`[0, 1, 2, 3, 4, 5]`||
|`1`|`-4`|`[6, 4, 4]`|`[0, 2, 1, 3, 4, 5]`|`[0, 2, 1]`|
|`2`|`-3`|`[6, 4, 3]`|`[0, 2, 3, 1, 4, 5]`|`[0, 2, 3]`|
|`2`|`-2`|`[6, 4, 2]`|`[0, 2, 4, 1, 3, 5]`|`[0, 2, 4]`|
|`2`|`-1`|`[6, 4, 1]`|`[0, 2, 5, 1, 3, 4]`|`[0, 2, 5]`|
|||`[6, 4, 4]`|`[0, 2, 1, 3, 4, 5]`||
|`1`|`-3`|`[6, 3, 4]`|`[0, 3, 1, 2, 4, 5]`|`[0, 3, 1]`|
|`2`|`-3`|`[6, 3, 3]`|`[0, 3, 2, 1, 4, 5]`|`[0, 3, 2]`|
|`2`|`-2`|`[6, 3, 2]`|`[0, 3, 4, 1, 2, 5]`|`[0, 3, 4]`|
|`2`|`-1`|`[6, 3, 1]`|`[0, 3, 5, 1, 2, 4]`|`[0, 3, 5]`|
|||`[6, 3, 4]`|`[0, 3, 1, 2, 4, 5]`||
|...|...|...|...|...|
|||`[6, 2, 4]`|`[0, 4, 1, 2, 3, 5]`||
|`1`|`-3`|`[6, 1, 4]`|`[0, 5, 1, 2, 3, 4]`|`[0, 5, 1]`|
|`2`|`-3`|`[6, 1, 3]`|`[0, 5, 2, 1, 3, 4]`|`[0, 5, 2]`|
|`2`|`-2`|`[6, 1, 2]`|`[0, 5, 3, 1, 2, 4]`|`[0, 5, 3]`|
|`2`|`-1`|`[6, 1, 1]`|`[0, 5, 4, 1, 3, 3]`|`[0, 5, 4]`|
|||`[6, 1, 4]`|`[0, 5, 1, 2, 3, 4]`||
|||`[6, 5, 4]`|`[0, 1, 2, 3, 4, 5]`||
|`0`|`-5`|`[5, 5, 4]`|`[1, 0, 2, 3, 4, 5]`|`[1, 0, 2]`|
|`2`|`-3`|`[5, 5, 3]`|`[1, 0, 3, 2, 4, 5]`|`[1, 0, 3]`|
|...|...|...|...|...|
|`2`|`-1`|`[1, 1, 1]`|`[5, 4, 3, 0, 1, 2]`|`[6, 5, 4]`|
|||`[1, 1, 4]`|`[5, 4, 0, 1, 2, 3]`||
|||`[1, 5, 4]`|`[5, 0, 1, 2, 3, 4]`||
|||`[6, 5, 4]`|`[0, 1, 2, 3, 4, 5]`||
