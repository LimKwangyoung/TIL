데이터베이스(DB)는 규약을 통해 구조화되어 저장되는 데이터의 모음이다. 해당 데이터베이스를 제어, 관리하는 통합 시스템을 DBMS(DataBase Management System)라고 하며, DBMS마다 정의된 쿼리 언어를 통해 삽입, 삭제, 수정, 조회 등을 수행할 수 있다. 또한, 데이터베이스는 실시간 접근과 동시 공유가 가능하다.
![](https://velog.velcdn.com/images/pyoung/post/83271d32-2239-452e-8a63-07ca63637573/image.png)

데이터베이스 위에 DBMS가 있고 그 위에 응용 프로그램이 있다.

***

# 엔터티
엔터티(entity)는 여러 개의 속성을 지닌 명사를 의미한다.

### 약한 엔터티와 강한 엔터티
예를 들어 A가 B의 존재 여부에 따라 종속적이라면, A는 약한 엔터티이고 B는 강한 엔터티가 된다.

***

# 릴레이션
릴레이션(relation)은 데이터베이스에서 정보를 구분하고 저장하는 기본 단위이다. 엔터티에 관한 데이터를 데이터베이스는 릴레이션 하나에 담아서 관리한다.

릴레이션은 관계형 데이터베이스에서는 '테이블'이라고 하며, NoSQL 데이터베이스에서는 '컬렉션'이라고 한다.

### 테이블과 컬렉션
데이터베이스의 종류는 관계형 데이터베이스와 NoSQL 데이터베이스로 나눌 수 있다. 관계형 데이터베이스인 MySQL은 레코드-테이블-데이터베이스로 이루어져 있고, NoSQL인 MongoDB는 도큐먼트-컬렉션-데이터베이스로 이루어져 있다.

***

# 속성
속성(attribute)은 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보이다.

***

# 도메인
도메인(domain)이란 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합을 말한다.

***

# 필드와 레코드
![](https://velog.velcdn.com/images/pyoung/post/21d4e54a-6f8f-49ad-9ad7-9c8debee50f2/image.png)

회원이라는 엔터티는 member라는 테이블로 속성인 이름, 아이디 등을 가지고 있으며 name, ID, address 등의 필드를 가진다. 그리고 테이블에 쌓이는 행(row) 단위의 데이터를 레코드 또는 튜플이라고 한다.

MySQL로 '책'이라는 엔터티를 정의하고 `book` 테이블을 만드는 코드는 다음과 같다.
```sql
CREATE TABLE book(
  id INT NOT NULL AUTO_INCREMENT,
  title VARCHAR(255),
  author_id INT,
  publishing_year VARCHAR(255),
  genre VARCHAR(255),
  created_at DATETIME,
  updated_at DATETIME,
  PRIMARY KEY (id)
);
```

### 필드 타입
필드는 타입을 갖는다. 여러 가지 타입이 있고 숫자, 날짜, 문자 타입 등이 있다.

#### 숫자 타입
숫자 타입으로는 `TINYINT`, `SMALLINT`, `MDEIUMINT`, `INT`, `BIGINT` 등이 있다.
![](https://velog.velcdn.com/images/pyoung/post/86608b57-c122-4645-94a7-f6bc856da038/image.png)

#### 날짜 타입
날짜 타입으로는 `DATE`, `DATETIME`, `TIMESTAMP` 등이 있다.

#### `DATE`
날짜 부분은 있지만 시간 부분은 없는 값에 사용된다. 3바이트의 용량을 가진다.

#### `DATETIME`
날짜 및 시간 부분을 모두 포함하는 값에 사용한다. 8바이트의 용량을 가진다.

#### `TIMESTAMP`
날짜 및 시간 부분을 모두 포함하는 값에 사용한다. 4바이트의 용량을 가진다.

> #### `DATETIME`과 `TIMESTAMP`
`TIMESTAMP`는 `DATETIME`과 달리 현재 시각을 UTC 시각으로 변환해준다.

#### 문자 타입
문자 타입으로는 `CHAR`, `VARCHAR`, `TEXT`, `BLOB`, `ENUM`, `SET` 등이 있다.

#### `CHAR`과 `VARCHAR`
`CHAR`과 `VARCHAR`은 몇 자까지 입력할지를 정한다.

`CHAR`는 고정 길이 문자열이며 길이는 0에서 255 사이의 값을 가진다. 무조건 선언한 길이 값으로 고정해서 저장된다.

`VARCHAR`는 가변 길이 문자열이며 길이는 0에서 65,535 사이의 값을 가진다. 입력된 데이터에 따라 용량을 가변시켜 저장한다.

따라서 `CHAR`의 경우 유동적이지 않은 길이를 가진 데이터의 경우에 효율적이며, `VARCHAR`은 유동적인 길이를 가진 데이터에 효율적이다.

#### `TEXT`와 `BLOB`
`TEXT`와 `BLOB`은 큰 데이터를 저장할 때 쓰인다.

`TEXT`는 큰 문자열 저장에 쓴다.

`BLOB`은 이미지, 동영상 등 큰 데이터 저장에 쓴다. 그러나 보통은 서버에 파일을 올리고 파일에 대한 경로를 `VARCHAR`로 저장한다.

#### `ENUM`과 `SET`
`ENUM`과 `SET`은 문자열을 열거한 타입이다.

`ENUM`은 단일 선택만 가능하고 `ENUM` 리스트에 없는 잘못된 값을 삽입하면 빈 문자열이 대신 삽입된다. 최대 65,535개의 요소들을 넣을 수 있다.

`SET`은 여러 개의 데이터를 선택할 수 있고 비트 단위의 연산을 할 수 있다. 최대 64개의 요소들을 넣을 수 있다.

`ENUM`과 `SET`은 공간적으로 이점을 볼 수 있지만, 애플리케이션의 수정에 따라 정의한 목록을 수정해야 한다는 단점이 있다.

***

# 관계
데이터베이스에는 여러 개의 테이블이 있고 서로의 관계가 정의되어 있다. 이 관계를 관계화살표로 나타낸다.
![](https://velog.velcdn.com/images/pyoung/post/6dbd1012-b44d-454c-812a-b32762907c12/image.png)


### 1:1 관계
1:1 관계는 테이블을 두 개의 테이블로 나눠 테이블의 구조를 더 이해하기 쉽게 만들어준다.

### 1:N 관계
1:N 관계는 한 개체가 다른 많은 개체를 포함하는 관계를 말한다.

### N:M 관계
N:M 관계는 테이블 두 개를 직접적으로 연결해서 구축하지 않고 1:N, 1:M 관계를 갖는 테이블 두 개로 나눠서 설정한다.

***

# 키
키는 테이블 간의 관계를 조금 더 명확하게 하고 테이블 자체의 인덱스를 위해 설치된 장치이다.
![](https://velog.velcdn.com/images/pyoung/post/f2d1b3a5-309e-4eba-9ddc-63f1d6ba8c08/image.png)

> #### 용어
**유일성** : 중복되는 값이 없다.
**최소성** : 필드를 조합하지 않고 최소 필드만 써서 키를 형성한다.

### 기본키
기본키(Primary Key, PK)는 유일성과 최소성을 만족하는 키이다. 테이블의 데이터 중 고유하게 존재하는 속성이며 중복되어서는 안된다.

기본키는 자연키 또는 인조키 중에 골라 설정한다.

#### 자연키
예를 들어 유저 테이블의 속성으로 주민등록번호, 이름, 성별이 있다고 하자. 이름과 성별과 같은 중복된 값들을 제외하면 남는 것은 주민등록번호이다. 이처럼 중복되지 않는 것을 '자연스레' 뽑다가 나오는 키를 자연키라고 한다. 언젠가는 변하는 속성을 지닌다.

#### 인조키
인위적으로 고유 식별자를 생성한 키를 인조키라고 한다. 자연키와는 대조적으로 변하지 않는다. 보통 기본키는 인조키로 설정한다.

### 외래키
외래키(Foreign Key, FK)는 다른 테이블의 기본키를 그대로 참조하는 값으로, 개체와의 관계를 식별하는 데 사용한다. 외래키는 중복되어도 된다.

### 후보키
후보키(Candidate Key)는 기본키가 될 수 있는 후보들이며 유일성과 최소성을 동시에 만족하는 키이다.

### 대체키
대체키(Alternate Key)는 후보키가 두 개 이상일 경우 기본키를 제외한 후보키를 말한다.

### 슈퍼키
슈퍼키(Super Key)는 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키이다.