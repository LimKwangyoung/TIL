ERD(Entity Relationship Diagram)는 데이터베이스를 구축할 때 가장 기초적인 역할을 하며, 릴레이션 간의 관계들을 정의한다.

***

# ERD의 중요성
ERD는 시스템의 요구 사항을 기반으로 작성되며 이를 기반으로 데이터베이스를 구축한다. 데이터베이스를 구축한 이후에도 디버깅 또는 비즈니스 프로세스 재설계가 필요한 경우에 설계도 역할을 담당하기도 한다.

ERD는 관계형 구조로 표현할 수 있는 데이터를 구성하는 데 유용할 수 있지만 비정형 데이터를 충분히 표현할 수 없다는 단점이 있다.

> #### 비정형 데이터
비구조화 데이터를 말하며, 미리 정의된 데이터 모델이 없거나 미리 정의된 방식으로 정리되지 않은 정보를 말한다.

***

# 정규화 과정
정규화 과정은 릴레이션 간의 잘못된 종속 관계로 인해 데이터베이스 이상 현상이 일어나서 이를 해결하거나, 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정이다.

> #### 용어
**삽입 이상** : 데이터 삽입 시 의도와는 다른 값들도 삽입되는 현상이다.
**삭제 이상** : 데이터 삭제 시 의도와는 다른 값들도 연쇄적으로 삭제되는 현상이다.
**갱신 이상** : 속성값 갱신 시 일부 튜플만 갱신되어 모순이 발생하는 현상이다.

정규화 과정은 기본 정규형인 제1정규형, 제2정규형, 제3정규형, 보이스/코드 정규형이 있고, 고급 정규형인 제4정규형, 제5정규형이 있다.

### 정규형 원칙
정규형 원칙은 자료의 중복성은 감소해야 하고, 독립적인 관계는 별개의 릴레이션으로 표현해야 하며, 각각의 릴레이션은 독립적인 표현이 가능해야 하는 것을 말한다.

### 제1정규형
어떤 릴레이션 R에 속한 모든 도메인이 더 이상 분해될 수 없는 원자 값(atomic value)만으로 되어 있도록 설계된 정규형이다. 릴레이션의 속성 값 중에서 한 개의 기본키에 대해 두 개 이상의 값을 가지는 반복 집합이 있어서는 안된다.
![](https://velog.velcdn.com/images/pyoung/post/e0308bdb-459d-424e-8b36-d13d85d07a69/image.png)

### 제2정규형
어떤 릴레이션 R에 대하여 제1정규형을 만족하면서 부분 함수적 종속을 제거한 정규형이다. 즉 기본키가 아닌 모든 속성이 기본키에 완전 함수적 종속이다.

![](https://velog.velcdn.com/images/pyoung/post/a7fbdaa9-4d69-4105-9e9c-0935e9f715c2/image.png)

위의 릴레이션은 기본키 { `유저ID`, `수강명` }에 대해 다음과 같은 함수적 종속을 보인다.

- { `유저ID`, `수강명` } $\rightarrow$ `유저번호`, `성취도`
- { `유저ID` } $\rightarrow$ `유저번호`

`유저ID`와 `유저번호`가 부분 함수적 종속을 보이고 있으므로, 2개의 릴레이션으로 분해하여 부분 함수적 종속을 제거한다.

- { `유저ID` } $\rightarrow$ `유저번호`
- { `유저ID`, `수강명` } $\rightarrow$ `성취도`

### 제3정규형
어떤 릴레이션 R에 대하여 제2정규형을 만족하면서 기본키가 아닌 모든 속성이 기본키에 이행적 함수적 종속을 만족하지 않는 정규형이다.

#### 이행적 함수 종속
이행적 함수 종속이란 $A \rightarrow B$이고 $B \rightarrow C$일 때 $A \rightarrow C$를 만족하는 관계를 말한다.
![](https://velog.velcdn.com/images/pyoung/post/1e919d1b-cda8-4c16-98a9-4afa95ad0fa5/image.png)

위의 릴레이션은 다음과 같은 함수적 종속을 보인다.

- `유저ID` $\rightarrow$ `등급`
- `등급` $\rightarrow$ `할인율`
- `할인율` $\rightarrow$ `유저ID`

따라서 2개의 릴레이션으로 분해하여 이행적 함수 종속을 제거한다.

### 보이스/코드 정규형(BCNF)
어떤 릴레이션 R에 대하여 제3정규형을 만족하면서 모든 결정자가 후보키인 정규이다.

> #### 용어
**결정자** : 함수 종속 관계에서 특정 종속자를 결정짓는 요소이다. $X \rightarrow Y$일 때 $X$는 결정자, $Y$는 종속자이다.

![](https://velog.velcdn.com/images/pyoung/post/df904432-3b1f-4a54-96d2-14bd58ac2e32/image.png)

위의 릴레이션은 { `학번`, `수강명` } 또는 { `학번`, `강사` }가 후보키가 되며, 삽입 이상이 발생한 상황이다. 이 릴레이션은 다음과 같은 함수 종속 다이어그램을 가진다.
![](https://velog.velcdn.com/images/pyoung/post/066e53d9-270c-493d-8b85-4785bbffb15e/image.png)

즉 `강사` 속성이 결정자이지만 후보키가 아니므로, `강사` 속성을 분리해야 한다.
![](https://velog.velcdn.com/images/pyoung/post/756a54c1-5182-4b38-a134-19e589a9bedc/image.png)
